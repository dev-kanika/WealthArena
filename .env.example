# ============================================================================
# WealthArena Master Environment Configuration Template
# ============================================================================
# This file contains all environment variables used across WealthArena services.
# Copy this file to .env and fill in actual values for your environment.
# 
# IMPORTANT: Never commit .env files with real credentials to version control.
# ============================================================================

# ============================================================================
# COMMON / SHARED CONFIGURATION
# ============================================================================

# Environment
NODE_ENV=development
PYTHON_ENV=development

# ============================================================================
# BACKEND SERVICE (Node.js/TypeScript)
# ============================================================================
# Required for: backend service
# Location: backend/.env (or use root .env)

# Database Configuration
# For production/real DB, set USE_MOCK_DB=false and configure below:
DB_HOST=sql-wealtharena-dev.database.windows.net
DB_NAME=wealtharena_db
DB_USER=wealtharena_admin
DB_PASSWORD=your-database-password-here
DB_PORT=1433
DB_ENCRYPT=true

# Mock Database Mode (for local development - no real DB required)
USE_MOCK_DB=true
# Set to false for production/real database usage
# When USE_MOCK_DB=true: All user data stored in memory (cleared on server restart)
# When USE_MOCK_DB=false: Requires real database (PostgreSQL, SQL Server, or Azure SQL)

# Azure Storage (optional for Phase 1)
AZURE_STORAGE_ACCOUNT=stwealtharenadev
AZURE_STORAGE_CONNECTION_STRING=your-storage-connection-string

# Azure Cosmos DB (optional - backend doesn't use this yet)
AZURE_COSMOS_ACCOUNT=cosmos-wealtharena-dev
AZURE_COSMOS_CONNECTION_STRING=your-cosmos-connection-string

# Server Configuration
PORT=3000

# Redis Configuration (optional for Phase 1)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# JWT & Security
JWT_SECRET=wealtharena-jwt-secret-change-this-in-production-12345
JWT_EXPIRES_IN=7d
BCRYPT_ROUNDS=10

# OpenAI API (for AI features)
OPENAI_API_KEY=your-openai-api-key-here

# Alpha Vantage API (for market data)
ALPHA_VANTAGE_API_KEY=your-alpha-vantage-api-key-here

# Chatbot API Configuration
CHATBOT_API_URL=http://localhost:8000

# CORS Configuration
ALLOWED_ORIGINS=http://localhost:5001,http://localhost:8081,http://localhost:3000

# API Configuration
API_VERSION=v1

# Automatic Data Loading Configuration
AUTO_LOAD_DATA=true
SKIP_AUTO_LOAD=false

# ============================================================================
# CHATBOT SERVICE (Python/FastAPI)
# ============================================================================
# Required for: chatbot service
# Location: chatbot/.env (or use root .env)

# Groq API (REQUIRED - application will not function without this key)
GROQ_API_KEY=gsk_your_groq_api_key_here
GROQ_MODEL=llama3-8b-8192
LLM_PROVIDER=groq

# Vector Database Configuration
CHROMA_PERSIST_DIR=data/vectorstore
# For Docker: CHROMA_PERSIST_DIR=/app/data/vectorstore
# For Azure: CHROMA_PERSIST_DIR=/home/data/vectorstore

# Server Configuration
APP_HOST=0.0.0.0
APP_PORT=8000

# PDF Ingestion Configuration (optional)
PDF_INGEST_INTERVAL_HOURS=24
ENABLE_PDF_INGESTION=true

# Sentry DSN (optional - for error tracking)
SENTRY_DSN=

# Sentiment Model Directory (optional)
SENTIMENT_MODEL_DIR=models/sentiment-finetuned

# ============================================================================
# DATA PIPELINE SERVICE (Python)
# ============================================================================
# Required for: data-pipeline service
# Location: data-pipeline/.env (or use root .env)

# Azure SQL Database
SQL_SERVER=your-sql-server.database.windows.net
SQL_DB=your_database_name
SQL_UID=your_username
SQL_PWD=your_password_here
# Optional: Specify ODBC Driver explicitly
# SQL_DRIVER=ODBC Driver 18 for SQL Server

# Azure Storage (ADLS)
# Option 1: Use connection string (recommended)
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=your_account_name;AccountKey=your_account_key_here;EndpointSuffix=core.windows.net
# Option 2: Use account name and key separately
# AZURE_STORAGE_ACCOUNT=your_account_name
# AZURE_STORAGE_KEY=your_account_key_here

AZURE_UPLOAD=true
AZURE_STORAGE_FILESYSTEM=raw
AZURE_PREFIX=asxStocks

# Processing Configuration
ADLS_CONTAINER=raw
ADLS_RAW_PREFIX=asxStocks
# Optional: Process multiple asset classes
# ADLS_RAW_PREFIX_LIST=asxStocks,crypto,forex,commodities,etfs

BATCH_ROWS=75000
MERGE_EVERY_ROWS=200000

# ?? DANGER: Truncation will DELETE all data in processed_prices table!
TRUNCATE_PRICES_BEFORE=false
CONFIRM_TRUNCATE=NO

# ?? SAFETY: Deletion is opt-in only
ADLS_DELETE_SOURCE=false

# ============================================================================
# RL TRAINING SERVICE (Python)
# ============================================================================
# Required for: rl-training service
# Location: rl-training/.env (or use root .env)

# Training Configuration
# (Most RL training config is in config files, but environment variables can override)

# ============================================================================
# ============================================================================  
# RL SERVICE (Python/Flask)
# ============================================================================  
# Required for: rl-service
# Location: rl-service/.env (or use root .env)
#
# Database Configuration (REQUIRED)
# Supports both PostgreSQL and SQL Server (Azure SQL)
DB_TYPE=sqlserver
# Options: sqlserver, postgres, postgresql, pg
# Default: sqlserver
DB_HOST=sql-wealtharena-dev.database.windows.net
DB_NAME=wealtharena_db
DB_USER=wealtharena_admin
DB_PASSWORD=your-database-password-here
DB_PORT=1433
# SQL Server default: 1433, PostgreSQL default: 5432
DB_ENCRYPT=true
# Enable encryption for database connections

# SQL Server Specific (optional - only needed if using SQL Server)
SQL_DRIVER=ODBC Driver 18 for SQL Server

# Server Configuration (REQUIRED)
PORT=5002
# Service port (default: 5002)
HOST=0.0.0.0
# Bind address (default: 0.0.0.0)

# Logging (optional)
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR

# Model Configuration (REQUIRED)
MODEL_MODE=mock
# Options: mock, production
#   - mock: Generate predictions without trained models (for development)
#   - production: Requires trained model files
MODEL_PATH=/app/models/latest
# Local path for model files
#   - Docker: /app/models/latest
#   - Local dev: ../../wealtharena_rl/checkpoints/latest

# Model Storage (optional - for cloud model loading)
# Azure Blob Storage (optional)
AZURE_STORAGE_CONNECTION_STRING=your-azure-storage-connection-string-here
# For downloading models from Azure Blob Storage

# Google Cloud Storage (optional)
GCS_BUCKET=wealtharena-models
# GCS bucket name for model storage
GCS_MODEL_PREFIX=latest/
# Prefix path within GCS bucket
# FRONTEND SERVICE (React Native/TypeScript)
# ============================================================================
# Required for: frontend service
# Location: frontend/.env (or use root .env)

# API Endpoints
BACKEND_API_URL=http://localhost:3000
CHATBOT_API_URL=http://localhost:8000
RL_SERVICE_API_URL=http://localhost:5000

# ============================================================================
# SERVICE-SPECIFIC NOTES
# ============================================================================
#
# BACKEND:
#   - Minimum required: USE_MOCK_DB=true (for local dev)
#   - Production: Set USE_MOCK_DB=false and configure DB_* variables
#
# CHATBOT:
#   - REQUIRED: GROQ_API_KEY (application will not function without it)
#   - Get key from: https://console.groq.com/
#
# DATA PIPELINE:
#   - REQUIRED: SQL_SERVER, SQL_DB, SQL_UID, SQL_PWD
#   - REQUIRED: AZURE_STORAGE_CONNECTION_STRING
#   - PREREQUISITE: Install ODBC Driver 18 for SQL Server
#
# RL TRAINING:
#   - Most configuration is in config/*.yaml files
#   - Environment variables can override config file settings
#
# RL SERVICE:
#   - Requires trained model files
#   - Configure RL_MODEL_PATH to point to model location
#
# FRONTEND:
#   - Configure API endpoints to match your backend services
#   - For local dev, use localhost URLs
#   - For production, use production API URLs
#
# ============================================================================